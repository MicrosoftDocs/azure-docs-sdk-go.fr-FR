---
title: Authentification avec le Kit de développement logiciel (SDK) Azure pour Go
description: En savoir plus sur les méthodes d’authentification disponibles dans le Kit de développement logiciel (SDK) Azure pour Go et comment les utiliser.
services: azure
author: sptramer
ms.author: sttramer
ms.date: 04/03/2018
ms.topic: article
ms.service: azure
ms.devlang: go
manager: carmonm
ms.openlocfilehash: 39f9dc5a7cdf9ab84cfd9264446bacb31392ca80
ms.sourcegitcommit: 59d2b4c9d8da15fbbd15e36551093219fdaf256e
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/18/2018
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="751c8-103">Méthodes d’authentification dans le Kit de développement logiciel (SDK) Azure pour Go</span><span class="sxs-lookup"><span data-stu-id="751c8-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="751c8-104">Le Kit de développement logiciel (SDK) Azure pour Go offre une variété de types et de méthodes d’authentification que votre application peut utiliser.</span><span class="sxs-lookup"><span data-stu-id="751c8-104">The Azure SDK for Go offers a variety of authentication types and methods that your application can use.</span></span> <span data-ttu-id="751c8-105">Les méthodes d’authentification prises en charge comprennent l’extraction d’informations depuis des variables d’environnement et l’authentification web interactive.</span><span class="sxs-lookup"><span data-stu-id="751c8-105">Supported authentication methods range from pulling information from environment variables to interactive web-based authentication.</span></span> <span data-ttu-id="751c8-106">Cet article vous présente les types d’authentification disponibles dans le Kit de développement logiciel (SDK) et leurs méthodes d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="751c8-106">This article introduces you to the available types of authentication in the SDK, and the methods for using them.</span></span> <span data-ttu-id="751c8-107">Vous découvrirez également les meilleures pratiques pour sélectionner le type d’authentification qui convient à votre application.</span><span class="sxs-lookup"><span data-stu-id="751c8-107">You'll also learn best practices for selecting which authentication type is right for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="751c8-108">Méthodes et types d’authentification disponibles</span><span class="sxs-lookup"><span data-stu-id="751c8-108">Available authentication types and methods</span></span>

<span data-ttu-id="751c8-109">Le Kit de développement logiciel (SDK) Azure pour Go offre différents types d’authentification, utilisant des informations d’identification différentes.</span><span class="sxs-lookup"><span data-stu-id="751c8-109">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="751c8-110">Tous ces types d’authentification sont disponibles via différentes méthodes d’authentification, qui permettent au kit de développement logiciel (SDK) d’accepter ces informations d’identification en tant qu’entrées.</span><span class="sxs-lookup"><span data-stu-id="751c8-110">Each of these authentication types are available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="751c8-111">Le tableau suivant décrit les types d’authentification disponibles et les situations dans lesquelles leur utilisation est recommandée pour votre application.</span><span class="sxs-lookup"><span data-stu-id="751c8-111">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="751c8-112">Type d'authentification</span><span class="sxs-lookup"><span data-stu-id="751c8-112">Authentication type</span></span> | <span data-ttu-id="751c8-113">Recommandé lorsque...</span><span class="sxs-lookup"><span data-stu-id="751c8-113">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="751c8-114">Authentification par certificat</span><span class="sxs-lookup"><span data-stu-id="751c8-114">Certificate-based authentication</span></span> | <span data-ttu-id="751c8-115">Vous avez un certificat X509 qui a été configuré pour un utilisateur ou un principal de service Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="751c8-115">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="751c8-116">Pour en savoir plus, consultez [Bien démarrer avec l’authentification par certificat dans Azure Active Directory].</span><span class="sxs-lookup"><span data-stu-id="751c8-116">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="751c8-117">Informations d'identification du client</span><span class="sxs-lookup"><span data-stu-id="751c8-117">Client credentials</span></span> | <span data-ttu-id="751c8-118">Vous avez un principal de service configuré pour cette application ou pour la classe d’applications à laquelle elle appartient.</span><span class="sxs-lookup"><span data-stu-id="751c8-118">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="751c8-119">Pour en savoir plus, consultez [Créer un principal du service avec Azure CLI 2.0].</span><span class="sxs-lookup"><span data-stu-id="751c8-119">To learn more, see [Create a service principal with Azure CLI 2.0].</span></span> |
| <span data-ttu-id="751c8-120">Identité du service administré (MSI)</span><span class="sxs-lookup"><span data-stu-id="751c8-120">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="751c8-121">Votre application s’exécute sur une ressource Azure qui a été configurée avec Identité du service administré (MSI).</span><span class="sxs-lookup"><span data-stu-id="751c8-121">Your application is running on an Azure resource that has been configured with Managed Service Identity (MSI).</span></span> <span data-ttu-id="751c8-122">Pour en savoir plus, consultez [Identité du service administré (MSI) pour les ressources Azure].</span><span class="sxs-lookup"><span data-stu-id="751c8-122">To learn more, see [Managed Service Identity (MSI) for Azure resources].</span></span> |
| <span data-ttu-id="751c8-123">Jeton d’appareil</span><span class="sxs-lookup"><span data-stu-id="751c8-123">Device token</span></span> | <span data-ttu-id="751c8-124">Votre application doit être utilisée de manière interactive __uniquement__ et aura une multitude d’utilisateurs, potentiellement à partir de plusieurs locataires Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="751c8-124">Your application is meant to be used interactively __only__ and will have a variety of users, potentially from multiple AAD tenants.</span></span> <span data-ttu-id="751c8-125">Les utilisateurs ont accès à un navigateur web pour se connecter.</span><span class="sxs-lookup"><span data-stu-id="751c8-125">Users have access to a web browser to log in.</span></span> <span data-ttu-id="751c8-126">Pour plus d’informations, consultez [Utilisation de l’authentification par jeton d’appareil](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="751c8-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="751c8-127">Nom d’utilisateur/mot de passe</span><span class="sxs-lookup"><span data-stu-id="751c8-127">Username/password</span></span> | <span data-ttu-id="751c8-128">Vous avez une application interactive qui ne peut pas utiliser une autre méthode d’authentification.</span><span class="sxs-lookup"><span data-stu-id="751c8-128">You have an interactive application that cannot use any other authentication method.</span></span> <span data-ttu-id="751c8-129">L’authentification multifacteur n’est pas activée pour la connexion AAD de vos utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="751c8-129">Your users do not have multi-factor authentication enabled for their AAD login.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="751c8-130">Si vous utilisez un type d’authentification autre que les informations d’identification du client, votre application doit être inscrite dans Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="751c8-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="751c8-131">Pour en savoir plus, consultez [Intégration d’applications dans Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span><span class="sxs-lookup"><span data-stu-id="751c8-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>

> [!NOTE]
> <span data-ttu-id="751c8-132">Évitez l’authentification par nom d’utilisateur/mot de passe, à moins que vous n’ayez des exigences particulières.</span><span class="sxs-lookup"><span data-stu-id="751c8-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="751c8-133">Dans les situations où la connexion basée sur l’utilisateur est nécessaire, l’authentification par jeton d’appareil peut en général être utilisée à la place.</span><span class="sxs-lookup"><span data-stu-id="751c8-133">In situations where user-based login is appropriate, device token authentication can usually be used instead.</span></span>

[Bien démarrer avec l’authentification par certificat dans Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Créer un principal du service avec Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Identité du service administré (MSI) pour les ressources Azure]: /azure/active-directory/managed-service-identity/overview
[Managed Service Identity (MSI) for Azure resources]: /azure/active-directory/managed-service-identity/overview

<span data-ttu-id="751c8-137">Ces types d’authentification sont disponibles par le biais de différentes méthodes.</span><span class="sxs-lookup"><span data-stu-id="751c8-137">These authentication types are available through different methods.</span></span> <span data-ttu-id="751c8-138">[_L’authentification basée sur l’environnement_](#use-environment-based-authentication) lit les informations d’identification directement à partir de l’environnement du programme.</span><span class="sxs-lookup"><span data-stu-id="751c8-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span> <span data-ttu-id="751c8-139">[_L’authentification basée sur un fichier_](#use-file-based-authentication) charge un fichier contenant les informations d’identification du principal de service.</span><span class="sxs-lookup"><span data-stu-id="751c8-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span> <span data-ttu-id="751c8-140">[_L’authentification basée sur le client_](#use-an-authentication-client) utilise un objet dans le code Go et vous charge de fournir les informations d’identification lors de l’exécution du programme.</span><span class="sxs-lookup"><span data-stu-id="751c8-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in Go code and makes you responsible for providing the credentials during program execution.</span></span> <span data-ttu-id="751c8-141">Enfin, [_l’authentification par jeton d’appareil_](#use-device-token-authentication) oblige les utilisateurs à se connecter de manière interactive via un navigateur web avec un jeton, et ne peut pas être utilisée avec l’authentification basée sur l’environnement ou sur un fichier.</span><span class="sxs-lookup"><span data-stu-id="751c8-141">Finally, [_Device token authentication_](#use-device-token-authentication) requires users to log in interactively through a web browser with a token, and cannot be used with environment- or file-based authentication.</span></span>

<span data-ttu-id="751c8-142">Tous les types et fonctions d’authentification sont disponibles dans le package `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="751c8-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="751c8-143">Évitez l’authentification basée sur le client, à moins que vous n’ayez des exigences particulières.</span><span class="sxs-lookup"><span data-stu-id="751c8-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="751c8-144">Cette méthode d’authentification favorise les mauvaises pratiques.</span><span class="sxs-lookup"><span data-stu-id="751c8-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="751c8-145">En utilisant l’authentification basée sur le client en particulier, il devient tentant de coder en dur les informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="751c8-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="751c8-146">L’écriture d’un code personnalisé pour l’authentification pourrait aussi s’interrompre sous les versions ultérieures du Kit de développement logiciel (SDK) si les exigences d’authentification sont modifiées.</span><span class="sxs-lookup"><span data-stu-id="751c8-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="751c8-147">Utiliser l’authentification basée sur l’environnement</span><span class="sxs-lookup"><span data-stu-id="751c8-147">Use environment-based authentication</span></span>

<span data-ttu-id="751c8-148">Si vous exécutez votre application dans un environnement étroitement contrôlé, tel qu’un conteneur, l’authentification basée sur l’environnement est un choix naturel.</span><span class="sxs-lookup"><span data-stu-id="751c8-148">If you're running your application in a tightly controlled environment such as in a container, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="751c8-149">Vous configurez l’environnement de l’interpréteur de commandes avant d’exécuter votre application et le Kit de développement logiciel (SDK) Go lit ces variables d’environnement lors de l’exécution pour s’authentifier avec Azure.</span><span class="sxs-lookup"><span data-stu-id="751c8-149">You configure the shell environment before running your application and the Go SDK reads these environment variables at runtime to authenticate with Azure.</span></span> 

<span data-ttu-id="751c8-150">L’authentification basée sur l’environnement prend en charge toutes les méthodes d’authentification, à l’exception des jetons d’appareil, évaluées dans l’ordre suivant : informations d’identification du client, certificats, nom d’utilisateur/mot de passe et Identité de service administré (MSI).</span><span class="sxs-lookup"><span data-stu-id="751c8-150">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order: Client credentials, certificates, username/password, and Managed Service Identity (MSI).</span></span> <span data-ttu-id="751c8-151">Si une variable d’environnement requise n’est pas définie, ou si le Kit de développement logiciel (SDK) obtient un refus de la part du service d’authentification, le type d’authentification suivant est tenté.</span><span class="sxs-lookup"><span data-stu-id="751c8-151">If a required environment variable is unset or the SDK gets a refusal from the authentication service, the next authentication type is tried.</span></span> <span data-ttu-id="751c8-152">Si le Kit de développement logiciel (SDK) ne peut pas s’authentifier à partir de l’environnement, il retourne une erreur.</span><span class="sxs-lookup"><span data-stu-id="751c8-152">If the SDK cannot authenticate from the environment, it returns an error.</span></span>

<span data-ttu-id="751c8-153">Le tableau suivant répertorie les variables d’environnement qui doivent être définies pour chaque type d’authentification pris en charge par l’authentification basée sur l’environnement.</span><span class="sxs-lookup"><span data-stu-id="751c8-153">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="751c8-154">Type d'authentification</span><span class="sxs-lookup"><span data-stu-id="751c8-154">Authentication type</span></span> | <span data-ttu-id="751c8-155">Variable d’environnement</span><span class="sxs-lookup"><span data-stu-id="751c8-155">Environment variable</span></span> | <span data-ttu-id="751c8-156">Description</span><span class="sxs-lookup"><span data-stu-id="751c8-156">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="751c8-157">__Informations d’identification du client__</span><span class="sxs-lookup"><span data-stu-id="751c8-157">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="751c8-158">L’ID du locataire Active Directory auquel appartient le principal du service.</span><span class="sxs-lookup"><span data-stu-id="751c8-158">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="751c8-159">Le nom ou ID du principal du service.</span><span class="sxs-lookup"><span data-stu-id="751c8-159">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="751c8-160">Secret associé au principal du service.</span><span class="sxs-lookup"><span data-stu-id="751c8-160">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="751c8-161">__Certificate__</span><span class="sxs-lookup"><span data-stu-id="751c8-161">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="751c8-162">L’ID du locataire Active Directory avec lequel le certificat est enregistré.</span><span class="sxs-lookup"><span data-stu-id="751c8-162">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="751c8-163">L’ID client d’application associé au certificat.</span><span class="sxs-lookup"><span data-stu-id="751c8-163">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="751c8-164">Le chemin d’accès au fichier de certificat client.</span><span class="sxs-lookup"><span data-stu-id="751c8-164">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="751c8-165">Le mot de passe du certificat client.</span><span class="sxs-lookup"><span data-stu-id="751c8-165">The password for the client certificate.</span></span> |
| <span data-ttu-id="751c8-166">__Nom d’utilisateur/mot de passe__</span><span class="sxs-lookup"><span data-stu-id="751c8-166">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="751c8-167">L’ID du locataire Active Directory auquel appartient l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="751c8-167">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="751c8-168">L’ID du client d’application.</span><span class="sxs-lookup"><span data-stu-id="751c8-168">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="751c8-169">Le nom d’utilisateur avec lequel se connecter.</span><span class="sxs-lookup"><span data-stu-id="751c8-169">The username to log in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="751c8-170">Le mot de passe avec lequel se connecter.</span><span class="sxs-lookup"><span data-stu-id="751c8-170">The password to log in with.</span></span> |
| <span data-ttu-id="751c8-171">__MSI__</span><span class="sxs-lookup"><span data-stu-id="751c8-171">__MSI__</span></span> | | <span data-ttu-id="751c8-172">Le MSI ne nécessite pas d’informations d’identification à définir.</span><span class="sxs-lookup"><span data-stu-id="751c8-172">MSI does not require any credentials to be set.</span></span> <span data-ttu-id="751c8-173">L’application doit être exécutée sur une ressource Azure configurée pour utiliser MSI.</span><span class="sxs-lookup"><span data-stu-id="751c8-173">The application must be running on an Azure resource configured to use MSI.</span></span> <span data-ttu-id="751c8-174">Pour plus de détails, consultez [Identité du service administré (MSI) pour les ressources Azure].</span><span class="sxs-lookup"><span data-stu-id="751c8-174">For details, see [Managed Service Identity (MSI) for Azure resources].</span></span> |

<span data-ttu-id="751c8-175">Si vous avez besoin de vous connecter à un point de terminaison cloud ou de gestion autre que le cloud public Azure par défaut, vous pouvez également définir les variables d’environnement suivantes.</span><span class="sxs-lookup"><span data-stu-id="751c8-175">If you need to connect to a cloud or management endpoint other than the default Azure public cloud, you can also set the following environment variables.</span></span> <span data-ttu-id="751c8-176">Il existe plusieurs raisons courantes pour les définir : si vous utilisez Azure Stack, un cloud dans une autre région géographique, ou le modèle de déploiement Azure Classic.</span><span class="sxs-lookup"><span data-stu-id="751c8-176">The most common reasons to set them are if you use Azure Stack, a cloud in a different geographic region, or the Azure Classic deployment model.</span></span>

| <span data-ttu-id="751c8-177">Variable d’environnement</span><span class="sxs-lookup"><span data-stu-id="751c8-177">Environment variable</span></span> | <span data-ttu-id="751c8-178">Description</span><span class="sxs-lookup"><span data-stu-id="751c8-178">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="751c8-179">Le nom de l’environnement de cloud auquel se connecter.</span><span class="sxs-lookup"><span data-stu-id="751c8-179">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="751c8-180">L’ID de ressource Active Directory à utiliser lors de la connexion.</span><span class="sxs-lookup"><span data-stu-id="751c8-180">The Active Directory resource ID to use when connecting.</span></span> <span data-ttu-id="751c8-181">Ce doit être un URI pointant vers votre point de terminaison de gestion.</span><span class="sxs-lookup"><span data-stu-id="751c8-181">This should be a URI pointing to your management endpoint.</span></span> |

<span data-ttu-id="751c8-182">Lorsque vous utilisez l’authentification basée sur l’environnement, appelez la fonction [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment)afin d’obtenir votre objet d’agent d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="751c8-182">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="751c8-183">Cet objet est ensuite défini sur la propriété `Authorizer` des clients pour leur permettre d’accéder à Azure.</span><span class="sxs-lookup"><span data-stu-id="751c8-183">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

## <a name="use-file-based-authentication"></a><span data-ttu-id="751c8-184">Utiliser l’authentification basée sur un fichier</span><span class="sxs-lookup"><span data-stu-id="751c8-184">Use file-based authentication</span></span>

<span data-ttu-id="751c8-185">L’authentification basée sur un fichier ne fonctionne avec les informations d’identification du client que lorsqu’elles sont stockées dans un format de fichier local généré par [Azure CLI 2.0](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="751c8-185">File-based authentication only works with client credentials when they are stored in a local file format generated by [the Azure CLI 2.0](/cli/azure).</span></span> <span data-ttu-id="751c8-186">Vous pouvez facilement créer ce fichier lors de la création d’un principal de service avec le paramètre `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="751c8-186">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="751c8-187">Si vous prévoyez d’utiliser l’authentification basée sur un fichier, assurez-vous que cet argument est fourni lors de la création d’un principal de service.</span><span class="sxs-lookup"><span data-stu-id="751c8-187">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="751c8-188">Étant donné que l’interface CLI imprime la sortie vers `stdout`, redirigez la sortie vers un fichier.</span><span class="sxs-lookup"><span data-stu-id="751c8-188">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="751c8-189">Définissez la variable d’environnement `AZURE_AUTH_LOCATION` dans laquelle se trouve le fichier d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="751c8-189">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="751c8-190">Cette variable d’environnement est lue par l’application, et les informations d’identification qu’elle contient sont analysées.</span><span class="sxs-lookup"><span data-stu-id="751c8-190">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="751c8-191">Si vous avez besoin de sélectionner le fichier d’autorisation lors de l’exécution, manipulez l’environnement du programme à l’aide de la fonction [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="751c8-191">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="751c8-192">Pour charger les informations d’authentification, appelez la fonction [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="751c8-192">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="751c8-193">Contrairement à l’autorisation basée sur l’environnement, l’autorisation basée sur un fichier nécessite un point de terminaison de ressource.</span><span class="sxs-lookup"><span data-stu-id="751c8-193">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="751c8-194">Pour plus d’informations sur l’utilisation des principaux de service et la gestion de leurs autorisations d’accès, consultez [Créer un principal du service avec Azure CLI 2.0].</span><span class="sxs-lookup"><span data-stu-id="751c8-194">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI 2.0].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="751c8-195">Utiliser l’authentification par jeton d’appareil</span><span class="sxs-lookup"><span data-stu-id="751c8-195">Use device token authentication</span></span>

<span data-ttu-id="751c8-196">Si vous souhaitez que les utilisateurs se connectent de manière interactive, l’authentification par jeton d’appareil est la meilleure manière d’offrir cette possibilité.</span><span class="sxs-lookup"><span data-stu-id="751c8-196">If you want users to log in interactively, the best way to offer that capability is through device token authentication.</span></span> <span data-ttu-id="751c8-197">Ce flux d’authentification passe à l’utilisateur un jeton à coller dans un site de connexion Microsoft, sur lequel il peut ensuite se connecter avec un compte Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="751c8-197">This authentication flow passes the user a token to paste into a Microsoft login site, where they then log in with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="751c8-198">Cette méthode d’authentification prend en charge les comptes pour lesquels l’authentification multifacteur est activée, contrairement à l’authentification par nom d’utilisateur/mot de passe standard.</span><span class="sxs-lookup"><span data-stu-id="751c8-198">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="751c8-199">Pour utiliser l’authentification par jeton d’appareil, vous devez créer un agent d’autorisation [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) avec la fonction [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="751c8-199">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="751c8-200">Appelez l’[Agent d’autorisation](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) sur l’objet résultant pour démarrer le processus d’authentification.</span><span class="sxs-lookup"><span data-stu-id="751c8-200">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="751c8-201">L’authentification par flux d’appareil bloque l’exécution du programme jusqu’à ce que le flux d’authentification soit entièrement terminé.</span><span class="sxs-lookup"><span data-stu-id="751c8-201">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="751c8-202">Utiliser un client d’authentification</span><span class="sxs-lookup"><span data-stu-id="751c8-202">Use an authentication client</span></span>

<span data-ttu-id="751c8-203">Si vous avez besoin d’un type d’authentification spécifique et que vous acceptez que votre programme s’occupe de charger les informations d’authentification de l’utilisateur, vous pouvez utiliser n’importe quel client qui est conforme à l’interface [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="751c8-203">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="751c8-204">Utilisez un type qui implémente cette interface si vous souhaitez un programme interactif, utilisez des fichiers de configuration spécialisée ou ayez une exigence qui vous empêche d’utiliser une autre méthode d’authentification.</span><span class="sxs-lookup"><span data-stu-id="751c8-204">Use a type that implements this interface when you want an interactive program, use specialized configuration files, or have a requirement that prevents you from using another authentication method.</span></span>

> [!WARNING]
> <span data-ttu-id="751c8-205">Ne codez jamais les informations d’identification en dur dans une application.</span><span class="sxs-lookup"><span data-stu-id="751c8-205">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="751c8-206">Placer des secrets dans un binaire d’application facilite leur extraction par un intrus, que l’application soit en cours d’exécution ou non.</span><span class="sxs-lookup"><span data-stu-id="751c8-206">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="751c8-207">Cela expose toutes les ressources Azure, pour lesquelles les informations d’identification sont autorisées, à des risques !</span><span class="sxs-lookup"><span data-stu-id="751c8-207">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="751c8-208">Le tableau suivant répertorie les types dans le Kit de développement logiciel (SDK) conformes à l’interface `AuthorizerConfig`.</span><span class="sxs-lookup"><span data-stu-id="751c8-208">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="751c8-209">Type d'authentification</span><span class="sxs-lookup"><span data-stu-id="751c8-209">Authentication type</span></span> | <span data-ttu-id="751c8-210">Type d’agent d’autorisation</span><span class="sxs-lookup"><span data-stu-id="751c8-210">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="751c8-211">Authentification par certificat</span><span class="sxs-lookup"><span data-stu-id="751c8-211">Certificate-based authentication</span></span> | <span data-ttu-id="751c8-212">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="751c8-212">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="751c8-213">Informations d'identification du client</span><span class="sxs-lookup"><span data-stu-id="751c8-213">Client credentials</span></span> | <span data-ttu-id="751c8-214">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="751c8-214">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="751c8-215">Identité du service administré (MSI)</span><span class="sxs-lookup"><span data-stu-id="751c8-215">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="751c8-216">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="751c8-216">[MSIConfig]</span></span> |
| <span data-ttu-id="751c8-217">Nom d’utilisateur/mot de passe</span><span class="sxs-lookup"><span data-stu-id="751c8-217">Username/password</span></span> | <span data-ttu-id="751c8-218">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="751c8-218">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="751c8-223">Créez un authentificateur avec sa fonction `New` associée, puis appelez `Authorize` sur l’objet résultant pour réaliser l’authentification.</span><span class="sxs-lookup"><span data-stu-id="751c8-223">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to perform authentication.</span></span> <span data-ttu-id="751c8-224">Par exemple, pour l’authentification par certificat :</span><span class="sxs-lookup"><span data-stu-id="751c8-224">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
